Python Regular expression and XML
===
### 파이썬 정규 표현식과 XML

<br/>

# 07-1 ) 정규 표현식 살펴보기
**정규 표현식** : 복잡한 문자열을 처리할 때 사용하는 기법이다.

<br/>

## 정규 표현식은 왜 필요한가?
- 다음과 같은 문제가 주어졌다고 가정해보자.
  ```
  주민등록번호를 포함하고 있는 텍스트가 있다. 이 텍스트에 포함된 모든 주민번호의 뒷자리를 * 문자로 변경하시오.
  ```
  <br/>

  - 정규 표현식으로 구현하지 않은 코드
    ```python
    data = """
    park 800905-1049118
    kim  700905-1059119
    """

    result = []
    for line in data.split("\n"):  # 줄바꿈 개수만큼 for문 실행 ( line 에 data를 줄바꿈하기 전까지의 값을 넣어줌)
        word_result = []
        for word in line.split(" "):   # line 값을 빈공간을 기준으로 나눈다
            if len(word) == 14 and word[:6].isdigit() and word[7:].isdigit():    # word의 길이가 14개이고 0부터 5까지 숫자이고 7부터 마지막까지 숫자이여야 한다.
                word = word[:6] + "-" + "*******"
            word_result.append(word)
        result.append(" ".join(word_result))

    print("\n".join(result))

    ```
  - 실행결과
    ```
    park 800905-*******
    kim  700905-*******
    ```  
  <br/>
  <br/>

  - **정규 표현식으로 구현한 코드**
    ```python
    import re    # 정규 표현식을 사용하기 위한 re 모듈

    data = """
    park 800905-1049118
    kim  700905-1059119
    """

    pat = re.compile("(\d{6})[-]\d{7}")
    print(pat.sub("\g<1>-*******",data))
    ```

  - 실행결과
    ```
    park 800905-*******
    kim  700905-*******
    ```
    > 이처럼 정규식을 사용하면 간편하고 직관적인 코드를 작성할 수 있다.

<br/>

---

<br/>

<br/>

# 07-2 ) 정규 표현식 시작하기
## 정규 표현식의 기초, 메타 문자
- 정규 표현식에서 사용하는 **메타 문자(meta characters)** 에는 다음과 같은 것들이 있다.
  ```
  . ^ $ * + ? { } [ ] \ | ( )
  ```
 <br/>
 
- **문자 클래스 [  ]**<br/>
  만약 [abc]라면 이 표현식의 의미는 'a,b,c 중 한 개의 문자와 매치'를 뜻한다. 
  
  
  - **ex )** <br/>
  
    |**정규식**|**문자열**|**매치여부**|**설명**|
    |:---:|:---:|:---:|:---:|
    |[abc]|a|Yes|"a"는 정규식과 일치하는 문자인 "a"가 있으므로 매치|
    |[abc]|before|Yes|"before"는 정규식과 일치하는 문자인 "b"가 있으므로 매치|
    |[abc]|dude|No|"dude"는 정규식과 일치하는 문자인 a,b,c 중 어느 하나도 포함하고 있지 않으므로 매치되지 않음|
  > [] 안의 두 문자 사이에 **하이픈(-)** 을 사용하게 되면 두 문자 사이의 범위를 의미한다. 예를들어 [a-c] 는 [abc]와 동일하고 [0-5]는 [012345]와 동일하다. 그리고 **^ 메타 문자** 는 **반대**라는 의미를 갖는다.
  
  <br/>
  
  - **자주 사용하는 문자 클래스**<br/>
  
    |정규 표현식|설명|
    |:---:|:---:|
    |\d|숫자와 매치, [0-9]와 동일한 표현식이다.|
    |\D|위와 반대 역할|
    |\s|whitespace 문자와 매치, [\t\n\r\f\v]와 동일한 표현식이다. 맨앞의 빈칸은 공백 문자를 의미한다.
    |\S|위와 반대 역할
    |\w|문자+숫자 와 매치, [a-zA-Z0-9]와 동일한 표현식
    |\W|위와 반대 역할

    <br>

---
  <br>

- **Dot(.)**
  <br/> Dot(.) 메타 문자는 줄바꿈 문자인 \n를 제외한 모든 문자와 매치됨을 의미.

  - ```python
    a.b  # a와 b 사이에 줄바꿈 문자를 제외한 어떤 문자가 들어가도 모두 매치
    ```
    > " a + 모든문자 + b "

  <br/>

  - **ex )** <br/>
  
    |**정규식**|**문자열**|**매치여부**|**설명**|
    |:---:|:---:|:---:|:---:|
    |a.b|aab|Yes|가운데 문자 "a"가 모든 문자를 의미하는 . 과 일치하므로 정규식과 매치|
    |a.b|a0b|Yes|가운데 문자 "0"가 모든 문자를 의미하는 . 과 일치하므로 정규식과 매치|
    |a.b|abc|No|a와 b 사이에 어떤 문자도 없으므로 매치되지 않음|
    <br/>

    > **a[.]b** : a와 b 사이에 Dot(.) 문자가 있으면 매치

    <br/>

---
    
<br/>

- **반복(*)**
  ```python
  ca*t    # * 문자 바로 앞에 있는 a가 0번 이상 반복되면 매치
  ```
  <br/>

  - **ex )** <br/>
  
    |**정규식**|**문자열**|**매치여부**|**설명**|
    |:---:|:---:|:---:|:---:|
    |ca*t|ct|Yes|"a"가 0번 반복되어 매치|
    |ca*t|cat|Yes|"a"가 1번 반복되어 매치|
    |ca*t|caaat|Yes|"a"가 3번 반복되어 매치|

<br/>

 ---
<br/>

- **반복(+)**
  ```python
  ca+t    # + 문자 바로 앞에 있는 a가 1번 이상 반복되면 매치
  ```
  <br/>

  - **ex )** <br/>
  
    |**정규식**|**문자열**|**매치여부**|**설명**|
    |:---:|:---:|:---:|:---:|
    |ca+t|ct|No|"a"가 0번 반복되어 매치 안됨|
    |ca+t|cat|Yes|"a"가 1번 반복되어 매치|
    |ca+t|caaat|Yes|"a"가 3번 반복되어 매치|

  <br>

---

- **반복({m,n},?)**
  - 1. {m}
    ```python
    ca{2}t    # a가 2번 반복되면 매치 
    ```
    > " c + a (반드시 2번 반복) + t "

    * **ex )** <br/>
  
      |**정규식**|**문자열**|**매치여부**|**설명**|
      |:---:|:---:|:---:|:---:|
      |ca{2}t|cat|No|"a"가 1번 반복되어 매치 안됨|
      |ca{2}t|caat|Yes|"a"가 2번 반복되어 매치|
  
  <br>
  <br>

  - 2. {m, n}
    ```python
    ca{2,5}t    # a가 2~5번 반복되면 매치
    ```
    > " c + a ( 2 ~ 5 번 반복 ) + t "

    * **ex )** <br/>
  
      |**정규식**|**문자열**|**매치여부**|**설명**|
      |:---:|:---:|:---:|:---:|
      |ca{2,5}t|cat|No|"a"가 1번 반복되어 매치 안됨|
      |ca{2,5}t|caat|Yes|"a"가 2번 반복되어 매치|
      |ca{2,5}t|caaaaat|Yes|"a"가 5번 반복되어 매치|
  
  <br>
  <br>
  
  - 3. ?
    ```python
    ab?c    # b가 0~1번 사용되면 매치
    ```
    > " a + b ( 있어도 되고 없어도 된다 ) + c "

    * **ex )** <br/>
  
      |**정규식**|**문자열**|**매치여부**|**설명**|
      |:---:|:---:|:---:|:---:|
      |ab?c|abc|Yes|"b"가 1번 사용되어 매치|
      |ab?c|ac|Yes|"b"가 0번 반복되어 매치|

<br>

---

<br>

## 파이썬에서 정규 표현식을 지원하는 re모듈<br>
```python
사용방법
>>> import re
>>> p = re.compile('ab*')   # re.compile을 이용하여 ab* 을 컴파일한다.
```

<br>
<br>

## 정규식을 이용한 문자열 검색
|**메서드**|**목적**|
|:---:|:---:|
|*match()*|문자열의 처음부터 정규식과 매치되는지 조사한다.
|*search()*|문자열 전체를 검색하여 정규식과 매치되는지 조사한다.
|*findall()*|정규식과 매치되는 모든 문자열을 리스트로 리턴한다.
|*finditer()*|정규식과 매치되는 모든 문자열을 반복 가능한 객체로 리턴한다.

<br>

우선 다음과 같은 패턴을 만들어 보자.
```python
>>> import re
>>> p = re.compile('[a-z]+')
```

<br>

- **match** : 문자열의 처음부터 정규식을 비교한다.
  ```python
  >>> m = p.match("python")
  >>> print(m)
  <_sre.SRE_Match object at 0x01F3F9F8>  #  match 객체가 리턴됨.
  ```
  > "python" 이라는 문자열은 [a-z]+ 정규식에 부합되므로 match 객체가 리턴된다.

  <br>

  ```python
  >>> m = p.match("3 python")
  >>> print(m)
  None
  ```
  > " 3 python " 이라는 문자열은 처음에 나오는 3이라는 문자가 정규식에 부합되지 않으므로 None이 리턴된다.

  <br>

  - 파이썬 정규식 프로그램
    ```python
    import re
    p = re.compile(정규 표현식)
    m = p.match("조사할 문자열")
    if m:
      print('Match fount : ', m.group())
    else:
      print('No match')
    ```
    > 즉 , match의 결과값이 있을 때만 그 다음 작업을 수행하겠다는 것이다.

    <br>

    - ex)
      ```python
      print('\nmatch 프로그램')
      def match_str(st1, st2):
        p = re.compile(st1)
        m = p.match(st2)
        if m:
          print('Match fount : ', m.group())
        else:
          print('No match')

      print('정규 표현식 : \'a.c\' 조사할 문자열 : \"abc\"  ')
      match_str('a.c','abc')
      print('정규 표현식 : \'a.c\' 조사할 문자열 : \"abc\"  ')
      match_str('a.c','ddd')
      ```
      - 실행결과
      ```
      match 프로그램
      정규 표현식 : 'a.c' 조사할 문자열 : "abc"  
      Match fount :  abc
      정규 표현식 : 'a.c' 조사할 문자열 : "ddd"
      No match
      ```

<br>

---

<br>

- **search** : 모든 문자열과 정규식과 비교한다.
  ```python
  >>> m = p.search("python")
  >>> print(m)
  <re.Match object; span=(0, 6), match='python'>
  ```
  > match 메서드와 동일하게 수행

  <br>

  ```python
  >>> m = p.search("3 python")
  >>> print(m)
  <re.Match object; span=(2, 8), match='python'>
  ```
  > 문자열 전체를 검색하기 때문에 정규식과 매치된다.